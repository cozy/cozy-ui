@require 'settings/palette.styl'
@require 'settings/icons.styl'
@require 'settings/breakpoints.styl'
@require 'settings/z-index.styl'
@require 'settings/spaces.styl'
@require 'settings/typography.styl'
@require 'settings/z-index'

$coz-bar-size=3rem

.upload-queue
    border   .0625rem solid var(--dividerColor)
    border-radius    .25rem
    background-color var(--paperBackgroundColor)
    display          flex
    flex-direction   column
    max-width 90%
    width    30rem

.upload-queue__threshold-bar
    min-width 10rem
    margin-right 1rem

.upload-queue__progress-caption
    line-height $caption-font-size
    height 1rem

.upload-queue__upload-progress
    align-items center
    display flex
    margin-top 0.125rem // Must tweak a bit the margin-top


.upload-queue--popover
    z-index           $popover-index
    border            rem(1) solid var(--dividerColor)
    border-radius     rem(4)
    box-shadow        rem(0 1 3 0) rgba(50, 54, 63, .19), rem(0 6 18 0) rgba(50, 54, 63, .19)
    background-color  var(--paperBackgroundColor)
    position fixed
    bottom   .5rem
    right    1.5rem
    height   13.125rem
    transform        translateY(18.75rem)
    transition       0.5s
    opacity          0
    visibility       hidden


.upload-queue--popover.upload-queue--visible
    opacity    1
    visibility visible
    transform  translate(0)

.upload-queue-header
    display          flex
    flex-direction   column
    justify-content  center
    height           2rem
    background-color var(--defaultBackgroundColor)
    font-weight      bold
    margin           0
    padding          .5rem 1rem .5rem

    .upload-queue-header-inner
        display flex
        justify-content space-between
        align-items center


progress.upload-queue-progress
    -webkit-appearance none
    -moz-appearance    none
    border     none
    display    block
    width      100%
    height     .125rem
    margin     0


.upload-queue-content
    overflow auto

.upload-queue--collapsed
    height 2.5rem

    .upload-queue-content
        visibility none

.upload-queue-list
    flex      1 1 auto
    display   flex
    flex-direction column

.upload-queue-item--error
    background-color var(--errorBackground)

.upload-queue-item--done
    background-color var(--defaultBackgroundColor)

.item-file
    user-select none
    overflow hidden

.item-status
    flex       0 0 15%
    text-align right
    white-space nowrap
    padding-left (spacing_values.m)

+medium-screen()
    // we need to cover the border-bottom of the cozy-bar
    $coz-bar-border-size = .0625rem

    .upload-queue
        border-radius 0
        border 0
        background-color var(--paperBackgroundColor)
        box-shadow none
        width 100%
        max-width 100%
        height auto
        transform none


    .upload-queue-header
        background 0
        text-transform uppercase
        padding .5rem

    .upload-queue-content
        display none

    .upload-queue--popover
        top $coz-bar-size
        bottom auto
        right 0
        left 0
        z-index $app-index + 3
        max-height 0

        &:before
            position fixed
            top $coz-bar-size - $coz-bar-border-size
            z-index  $nav-index
            width 100%
            height $coz-bar-border-size
            content ''
            background var(--paperBackgroundColor)

        &.upload-queue--visible
            max-height 30%

        .upload-queue-content
            display none

